
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://beamable.github.io/UnrealSDK/user-reference/runtime-systems/operations-and-waits/">
      
      
        <link rel="prev" href="../user-slots/">
      
      
        <link rel="next" href="../connectivity/">
      
      
      <link rel="icon" href="../../../assets/images/beamable-badge.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Operations & Waits - Unreal SDK</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unreal-sdk-operations-waits" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Unreal SDK" class="md-header__button md-logo" aria-label="Unreal SDK" data-md-component="logo">
      
  <img src="../../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Unreal SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Operations & Waits
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Beamable/UnrealSDK" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Beamable/UnrealSDK
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Unreal SDK" class="md-nav__button md-logo" aria-label="Unreal SDK" data-md-component="logo">
      
  <img src="../../../assets/images/logo.png" alt="logo">

    </a>
    Unreal SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Beamable/UnrealSDK" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Beamable/UnrealSDK
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    What's New
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            What's New
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../whatsnew/1.1.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1.0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../whatsnew/1.0.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.0.0
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            User Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SDK Technical Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Runtime Systems
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Runtime Systems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-slots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Slots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Operations & Waits
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Operations & Waits
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#operation-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Operation Lifecycle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-and-exposing-your-own-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Writing and Exposing your Own Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing and Exposing your Own Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beam-flow-nodes-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Beam Flow Nodes - Operations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Hooks...
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing Hooks...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beam-operation-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      Beam Operation Hooks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-not-template-based-promises" class="md-nav__link">
    <span class="md-ellipsis">
      Why not Template-based Promises?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#waits" class="md-nav__link">
    <span class="md-ellipsis">
      Waits
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connectivity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectivity Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lower-level/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lower Level SDK
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Beamable Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Beamable Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Indentity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/content/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Content
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/stats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/announcements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Announcements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/inventory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inventory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/stores/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/lobbies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lobbies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beamable-services/matchmaking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Matchmaking
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Microservices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Microservices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/setting-microservices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting Up Microservices
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Federation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Federation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../federation/federation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../federation/federated-login/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Federated Login
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../federation/federated-game-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Federated Game Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../federation/federated-inventory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Federated Inventory
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Servers and Builds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Servers and Builds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../servers-and-builds/dedicated-servers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dedicated Servers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../servers-and-builds/linux-builds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux Builds
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unreal Online Subsystems
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Unreal Online Subsystems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../online-subsystems/online-subsystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../online-subsystems/online-subsystem-identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Online Subsystem Identity
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Samples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Samples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../samples/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup Sample Projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sample Projects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Sample Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../samples/live-ops-demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LiveOps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../samples/discord-demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Discord
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../samples/steam-demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Steam
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../samples/hathora-demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hathora
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#operation-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Operation Lifecycle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-and-exposing-your-own-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Writing and Exposing your Own Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing and Exposing your Own Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beam-flow-nodes-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Beam Flow Nodes - Operations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Hooks...
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing Hooks...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beam-operation-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      Beam Operation Hooks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-not-template-based-promises" class="md-nav__link">
    <span class="md-ellipsis">
      Why not Template-based Promises?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#waits" class="md-nav__link">
    <span class="md-ellipsis">
      Waits
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="unreal-sdk-operations-waits">Unreal SDK - Operations &amp; Waits<a class="headerlink" href="#unreal-sdk-operations-waits" title="Permanent link">¶</a></h1>
<p>The Beamable SDK uses slight variation on Promises we named Operations. 
These provide the same semantics as promises but their implementation is slightly different to allow for a BP-compatible API.</p>
<p>They wrap concurrent <em>operations</em> (mostly HTTP Requests) under a <code>FBeamOperationHandle</code> exposed to some higher-level system.
To put it in simpler terms:</p>
<blockquote>
<p>When you want to expose a single function that makes a bunch of requests and emits events as responses come in, ultimately handling success/failure of the entire sequence, use an Operation.</p>
</blockquote>
<p>We provide a lot of Operations inside our <code>UBeamRuntimeSubsystem</code> implementations; covering most basic use-cases.
However, understanding how to create your own operations enables you to add behavior to last-mile hooks we expose. A couple of examples:</p>
<ul>
<li>"I want to go talk to a microservice to fetch additional data for a user before the SDK's <code>UBeamRuntime::OnUserReady</code> callback."</li>
<li>"I want to go talk to a microservice to validate that you can actually join this matchmaking queue."</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While possible, we don't recommend creating the actual operations as blueprints. 
It's OK to do so for a quick experimentation session; but shipping with it is <em>not recommended</em>.
<strong>Calling <em>Operations</em> that are written in C++ is the primary way we recommend Blueprints to interact with the Beamable SDK (we even have special nodes for it).</strong></p>
</div>
<h2 id="operation-lifecycle">Operation Lifecycle<a class="headerlink" href="#operation-lifecycle" title="Permanent link">¶</a></h2>
<p>Every Operation has an <code>int64</code> id called the <code>FBeamOperationHandle</code>. 
We use it to track the operation's state, its emitted events, its current status and which of Beamable's requests are part of it.</p>
<p>The lifecycle of an operation goes as follows:</p>
<p><a class="glightbox" href="../../../media/imgs/operation-and-waits-lifecycle.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="operation-and-waits-lifecycle.png" src="../../../media/imgs/operation-and-waits-lifecycle.png" /></a></p>
<h2 id="writing-and-exposing-your-own-operations">Writing and Exposing your Own Operations<a class="headerlink" href="#writing-and-exposing-your-own-operations" title="Permanent link">¶</a></h2>
<p>We try and expose all of our main SDK operations in both BP and CPP flavors. 
If you'd like to do the same thing, this section is for you. If you're looking for how to write hooks in C++, look into the next section.</p>
<p>The primary trade-off is that: </p>
<ul>
<li>BP-Compatible versions do not allow for lambda binding and variable capturing. </li>
<li>The CPP Version does allow for those things and, as they can be extremely useful for development speed and other cases, we decided on supporting both flavors.</li>
</ul>
<p>The snippet below explains how to write an operation for both BP and CPP; sharing its actual logic. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">// This is the BP-Compatible Function</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">FBeamOperationHandle</span><span class="w"> </span><span class="nf">U________::__________Operation</span><span class="p">(</span><span class="n">FUserSlot</span><span class="w"> </span><span class="n">UserSlot</span><span class="p">,</span><span class="w"> </span><span class="p">(...</span><span class="n">OperationParams</span><span class="p">...),</span><span class="w"> </span><span class="n">FBeamOperationEventHandler</span><span class="w"> </span><span class="n">OnOperationEvent</span><span class="p">,</span><span class="w"> </span><span class="n">UObject</span><span class="o">*</span><span class="w"> </span><span class="n">CallingContext</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="c1">// First, we start an operation using the BP-Compatible BeginOperation call</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Runtime</span><span class="o">-&gt;</span><span class="n">RequestTrackerSystem</span><span class="o">-&gt;</span><span class="n">BeginOperation</span><span class="p">({</span><span class="n">UserSlot</span><span class="p">},</span><span class="w"> </span><span class="n">GetClass</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetFName</span><span class="p">().</span><span class="n">ToString</span><span class="p">(),</span><span class="w"> </span><span class="n">OnOperationEvent</span><span class="p">);</span><span class="w">  </span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="c1">// Then, we call a function that takes in the operation parameters and the Handle for the operation.</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="n">TheActualOperationLogic</span><span class="p">(</span><span class="n">UserSlot</span><span class="p">,</span><span class="w"> </span><span class="p">(...</span><span class="n">OperationParams</span><span class="p">...),</span><span class="w"> </span><span class="n">Handle</span><span class="p">);</span><span class="w">  </span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="c1">// Operation functions usually return the handle so that callers can ask questions about the state of the operation if they want to.    </span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Handle</span><span class="p">;</span><span class="w">  </span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1">// This is the CPP Function</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="n">FBeamOperationHandle</span><span class="w"> </span><span class="nf">U__________::CPP_________Operation</span><span class="p">(</span><span class="n">FUserSlot</span><span class="w"> </span><span class="n">UserSlot</span><span class="p">,</span><span class="w"> </span><span class="p">(...</span><span class="n">OperationParams</span><span class="p">...),</span><span class="w"> </span><span class="n">FBeamOperationEventHandlerCode</span><span class="w"> </span><span class="n">OnOperationEvent</span><span class="p">,</span><span class="w"> </span><span class="n">UObject</span><span class="o">*</span><span class="w"> </span><span class="n">CallingContext</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="c1">// First, we start an operation using the BP-Compatible BeginOperation call</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Runtime</span><span class="o">-&gt;</span><span class="n">RequestTrackerSystem</span><span class="o">-&gt;</span><span class="n">CPP_BeginOperation</span><span class="p">({</span><span class="n">UserSlot</span><span class="p">},</span><span class="w"> </span><span class="n">GetClass</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetFName</span><span class="p">().</span><span class="n">ToString</span><span class="p">(),</span><span class="w"> </span><span class="n">OnOperationEvent</span><span class="p">);</span><span class="w">  </span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="c1">// Then, we call a function that takes in the operation parameters and the Handle for the operation.</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="n">TheActualOperationLogic</span><span class="p">(</span><span class="n">UserSlot</span><span class="p">,</span><span class="w"> </span><span class="n">Key</span><span class="p">,</span><span class="w"> </span><span class="n">Value</span><span class="p">,</span><span class="w"> </span><span class="n">Handle</span><span class="p">);</span><span class="w">  </span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">    </span><span class="c1">// Operation functions usually return the handle so that callers can ask questions to UBeamRequestTracker about the state of the operation if they want to. </span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Handle</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="p">}</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="kt">void</span><span class="w"> </span><span class="nf">U__________::TheActualOperationLogic</span><span class="p">(</span><span class="n">FUserSlot</span><span class="w"> </span><span class="n">Slot</span><span class="p">,</span><span class="w"> </span><span class="p">(...</span><span class="n">OperationParams</span><span class="p">...),</span><span class="w"> </span><span class="n">FBeamOperationHandle</span><span class="w"> </span><span class="n">Op</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">    </span><span class="c1">// This is mostly an example snippet of things you can do...</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">    </span><span class="c1">// We can check the local client state and fail operations without any request ever being made.</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">    </span><span class="c1">// For example, check if a user is authenticated or not.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">    </span><span class="n">FBeamRealmUser</span><span class="w"> </span><span class="n">RealmUser</span><span class="p">;</span><span class="w">  </span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">UserSlots</span><span class="o">-&gt;</span><span class="n">GetUserDataAtSlot</span><span class="p">(</span><span class="n">Slot</span><span class="p">,</span><span class="w"> </span><span class="n">RealmUser</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">))</span><span class="w">  </span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">    </span><span class="p">{</span><span class="w">       </span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="w">    </span><span class="n">RequestTracker</span><span class="o">-&gt;</span><span class="n">TriggerOperationError</span><span class="p">(</span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">TEXT</span><span class="p">(</span><span class="s">&quot;NO_AUTHENTICATED_USER_AT_SLOT&quot;</span><span class="p">));</span><span class="w">  </span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span><span class="w">  </span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">    </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">    </span><span class="c1">// We can also prepare a request handler, capturing the &quot;Op&quot; Handle</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">SomeRequestHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FOn______</span><span class="o">::</span><span class="n">CreateLambda</span><span class="p">([</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="p">](</span><span class="n">F______</span><span class="w"> </span><span class="n">Resp</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="w">    </span><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a><span class="w">        </span><span class="c1">// If the request is being retried, we don&#39;t do anything.</span>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="w">        </span><span class="c1">// But... we could go update a UI here or something...</span>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Resp</span><span class="p">.</span><span class="n">State</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RS_Retrying</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="w">        </span><span class="c1">// If the request was successful, we can trigger the Operation as a success.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Resp</span><span class="p">.</span><span class="n">State</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RS_Success</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="w">            </span><span class="c1">// (...) change local system&#39;s state            </span>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a><span class="w">            </span><span class="n">RequestTracker</span><span class="o">-&gt;</span><span class="n">TriggerOperationSuccess</span><span class="p">(</span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="p">{});</span><span class="w">  </span>
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a><span class="w">        </span><span class="c1">// If the request failed, we can trigger the Operation as a success.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a><span class="w">            </span><span class="c1">// (...) handle error and trigger the Operation as an error.</span>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a><span class="w">            </span><span class="n">RequestTracker</span><span class="o">-&gt;</span><span class="n">TriggerOperationError</span><span class="p">(</span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">Resp</span><span class="p">.</span><span class="n">ErrorData</span><span class="p">.</span><span class="n">error</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a><span class="w">    </span><span class="p">});</span><span class="w">    </span>
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a><span class="w">    </span><span class="c1">// Make the request passing in the &quot;Op&quot; Handle (this tracks lets our UBeamBackend know not to clean up the request until the Operation has finished)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Request____</span><span class="p">(</span><span class="n">Slot</span><span class="p">,</span><span class="w"> </span><span class="p">(...</span><span class="n">ReqParams</span><span class="p">...),</span><span class="w"> </span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">SomeRequestHandler</span><span class="p">);</span>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition warning parameter names and beam flow">
<p class="admonition-title">Warning</p>
<p>The parameter names <code>UserSlot</code>, <code>OnOperationEvent</code> and <code>CallingContext</code> are important! 
They allow you to write your own implementation of our Beam Flow node for your operation. 
Look at the <a href="#beam-flow-nodes-operations">Beam Flow Nodes</a> section for more information on how to create these.</p>
</div>
<p>There are tons of examples of operations in our SDK. For some guidance, you can take a look at any of our various runtime subsystems such as:</p>
<ul>
<li><code>UBeamStatsSubsystem</code></li>
<li><code>UBeamInventorySubsystem</code></li>
<li><code>UBeamLobbySubsystem</code></li>
<li>Any other sub-class of <code>UBeamRuntimeSubsystem</code>.</li>
</ul>
<p>Feel free to copy-paste them as a template of how to implement and reason about <code>Operations</code>.</p>
<h3 id="beam-flow-nodes-operations">Beam Flow Nodes - Operations<a class="headerlink" href="#beam-flow-nodes-operations" title="Permanent link">¶</a></h3>
<p>There are two flavors of Beam-Flow nodes; one are Raw Requests that you can use to hit our APIs; the other is the Operation Beam Flow node.
Operation Nodes look like this:</p>
<p><a class="glightbox" href="../../../media/imgs/operation-and-waits-beam-flow-nodes.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="beam-flow-node" src="../../../media/imgs/operation-and-waits-beam-flow-nodes.png" /></a></p>
<p>Beamable Operation Flow Nodes assume a few things:</p>
<ul>
<li>One or more participating <code>UserSlots</code> (see <a href="../user-slots/">User Slots</a> for more information).</li>
<li>An event handler for handling any of the events.</li>
<li>Events can be: <code>OET_SUCCESS</code>, <code>OET_ERROR</code> and <code>OET_CANCELLED</code> plus a <code>FName EventCode</code>.     </li>
<li>Events can contain some arbitrary data associated with them (implementations of <code>IBeamOperationEventData</code>).</li>
</ul>
<p>To create these nodes for your own operations, you can look at any of our own nodes (that live inside our <code>UncookedOnly</code> module: <code>BeamableCoreBlueprintNodes</code> ) and copy/paste one implementation changing the values accordingly.
However, there are a few restrictions:</p>
<ul>
<li>The function must be a <code>UFUNCTION</code> that returns a <code>FBeamOperationHandle</code> and contains the following named parameters:<ul>
<li><code>FUserSlot UserSlot</code>, if a single user is involved in the operation, or <code>TArray&lt;FUserSlot&gt; UserSlot</code>, if multiple users are involved in the operation.</li>
<li>If multiple users, the <code>UFUNCTION</code> must also add <code>meta=(BeamOperationMultiUser)</code>.</li>
<li><code>FBeamOperationEventHandler OnOperationEvent</code> to be the event handler that will handle all events raised by the operation.</li>
<li>The function can have any other parameters you want in any order as long as the above parameters are there.</li>
</ul>
</li>
<li>The function must be declared from inside a <code>UGameInstanceSubsystem</code> / <code>UBeamRuntimeSubsystem</code> subclass.</li>
</ul>
<p>Here's an example of what you need to declare one of these (we recommend copying from your own SDK code instead of this snippet).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="cp">#define LOCTEXT_NAMESPACE &quot;K2BeamNode_Operation_CommitInventoryUpdate&quot;  </span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">UCLASS</span><span class="p">(</span><span class="n">meta</span><span class="o">=</span><span class="p">(</span><span class="n">BeamFlowNode</span><span class="p">))</span><span class="w">  </span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">UK2BeamNode_Operation_CommitInventoryUpdate</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">UK2BeamNode_Operation</span><span class="w">  </span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="n">GENERATED_BODY</span><span class="p">()</span><span class="w">  </span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="c1">// This returns the title of the node.</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">FText</span><span class="w"> </span><span class="n">GetNodeTitle</span><span class="p">(</span><span class="n">ENodeTitleType</span><span class="o">::</span><span class="n">Type</span><span class="w"> </span><span class="n">TitleType</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">LOCTEXT</span><span class="p">(</span><span class="s">&quot;Title&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Operation - Inventory - CommitInventoryUpdate&quot;</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="c1">// This should get a static UFUNCTION that returns a valid instance of the UGameInstanceSubsystem containing the Operation function.</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">FName</span><span class="w"> </span><span class="n">GetSubsystemSelfFunctionName</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">GET_FUNCTION_NAME_CHECKED</span><span class="p">(</span><span class="n">UBeamInventorySubsystem</span><span class="p">,</span><span class="w"> </span><span class="n">GetSelf</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="c1">// This should return the UFUNCTION Operation&#39;s name.</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">FName</span><span class="w"> </span><span class="n">GetOperationFunctionName</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">GET_FUNCTION_NAME_CHECKED</span><span class="p">(</span><span class="n">UBeamInventorySubsystem</span><span class="p">,</span><span class="w"> </span><span class="n">CommitInventoryUpdateOperation</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">    </span><span class="c1">// This should get the UGameInstanceSubsystem class</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">UClass</span><span class="o">*</span><span class="w"> </span><span class="n">GetRuntimeSubsystemClass</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">UBeamInventorySubsystem</span><span class="o">::</span><span class="n">StaticClass</span><span class="p">();</span><span class="w"> </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="p">};</span><span class="w">  </span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="cp">#undef LOCTEXT_NAMESPACE</span>
</code></pre></div>
<p>As long as you have one of these in an <code>UncookedOnly</code> module of your application, you should be able to expose your own operations as BP nodes (this is compatible with Multiplayer PIE mode).</p>
<h2 id="writing-hooks">Writing Hooks...<a class="headerlink" href="#writing-hooks" title="Permanent link">¶</a></h2>
<p>... and other <code>FBeamOperationHandle</code> returning functions. 
These are the various callback flavors that we expose so you can customize your experience with our SDK. In other words:</p>
<blockquote>
<p>If you ever see a Delegate or Virtual Function that you can implement that returns one or more <code>FBeamOperationHandle</code>, you need to create operations and return their handles so that we can wait on your code before we proceed with ours.
It's basically a way for you to inject a promise that we'll run as part of a larger process.</p>
</blockquote>
<p>There are a few flavors of this around the SDK:</p>
<ol>
<li><strong>Delayed Operation</strong>: It's basically a simple parameter-less callback that returns a <code>FBeamOperationHandle</code> our SDK should wait for.<ol>
<li>See our <code>UBeamRuntime::LoginGuest</code> function for an example of this.</li>
</ol>
</li>
<li><strong>Runtime Subsystem Implementation</strong>: Implementations of virtual functions in one of our SDK's base classes such as <code>UBeamRuntimeSubsystem</code>.<ol>
<li>This is for when you wish to make a system that ties into the Beamable life-cycle like our own <code>UBeamRuntimeSubsystem</code> implementations do.</li>
<li>This is rarely needed, but... in unique custom use-cases, it's likely to be the best way to accomplish your goals.</li>
</ol>
</li>
<li><strong>Hooks:</strong> Bind into delegates created via <code>DEFINE_BEAM_OPERATION_HOOK</code>.<ol>
<li>We don't use Hooks ourselves IN ANY CIRCUNSTANCES and leave these as "game-maker-only extensions".</li>
<li>You can search for <code>DEFINE_BEAM_OPERATION_HOOK</code> and find some usages of the macro to better understand these. </li>
</ol>
</li>
</ol>
<h3 id="beam-operation-hooks">Beam Operation Hooks<a class="headerlink" href="#beam-operation-hooks" title="Permanent link">¶</a></h3>
<p><strong>Hooks</strong> have some more context that you should know about how to use them:</p>
<ol>
<li>You call some Operation we expose in our SDK. That Operation does a bunch of things and triggers the hooks at some well-known point during their execution.<ol>
<li>Since you have the source code, you can look into these functions and see the exact semantics of the trigger, but we do try and keep these documented in call-site comments.</li>
</ol>
</li>
<li>Whenever a set of hooks are triggered, what we are actually doing is:<ol>
<li>The returned <code>FBeamOperationHandles</code> from the hooks are fed into a <code>UBeamRequestTracker::WaitAll</code> call.</li>
<li>Our operation will wait for all your hooks to complete; successfully or otherwise.</li>
<li>If your registered operations fail, we'll log out the errors that exist inside those operations and let you know clearly the problem happened in the operation you provided to the hook.</li>
<li>If your operations succeeded, we'll continue with our own operation and eventually trigger that as a success.</li>
<li>The semantics of what happens in case of a failure change from hook to hook, but... for the most part, we'll fail our own operation if any hooks fail.</li>
</ol>
</li>
</ol>
<p>Here's a "template example" of how this stuff will typically look like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// Let&#39;s say you want to run some synchronous code at a hook but don&#39;t really want to make any request to anything.</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1">// In that case you can get the system and add a hook that:</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">const</span><span class="w"> </span><span class="n">U_____</span><span class="w"> </span><span class="n">SomeSystem</span><span class="p">;</span><span class="w">  </span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">SomeSystem</span><span class="o">-&gt;</span><span class="n">Hook</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">F____</span><span class="o">::</span><span class="n">CreateLambda</span><span class="p">([</span><span class="k">this</span><span class="p">]()</span><span class="w">  </span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="c1">// (...) Does some synchronous code</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="c1">// This means that your operation is completed at the end of this function</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="c1">// For cases like these, we provide the utility function below.</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="c1">// This creates and immediately completes an operation and returns its handle.</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">GetEngineSubsystem</span><span class="o">&lt;</span><span class="n">UBeamRequestTracker</span><span class="o">&gt;</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CPP_BeginSuccessfulOperation</span><span class="p">({},</span><span class="w"> </span><span class="n">FString</span><span class="p">(</span><span class="s">&quot;MySystemName&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">FString</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">FBeamOperationEventHandlerCode</span><span class="p">{});</span><span class="w">  </span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="p">}));</span><span class="w">  </span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="c1">// Let&#39;s say you want to call some microservice you wrote as part of our operation</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="c1">// In that case you can add a hook that:</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="n">SomeSystem</span><span class="o">-&gt;</span><span class="n">Hook</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">F____</span><span class="o">::</span><span class="n">CreateLambda</span><span class="p">([</span><span class="k">this</span><span class="p">]()</span><span class="w">  </span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="c1">// Begins an operation</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">Op</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">GetEngineSubsystem</span><span class="o">&lt;</span><span class="n">UBeamRequestTracker</span><span class="o">&gt;</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CPP_BeginOperation</span><span class="p">({},</span><span class="w"> </span><span class="n">FString</span><span class="p">(</span><span class="s">&quot;MySystemName&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">{});</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">    </span><span class="c1">// Get Microservice Subsystem that exposes calls to it</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">MyMsApi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">GetEngineSubsystem</span><span class="o">&lt;</span><span class="n">UMyMsApi</span><span class="o">&gt;</span><span class="p">();</span><span class="w">  </span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">MyMsReq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UMyMsRequest</span><span class="o">::</span><span class="n">Make</span><span class="p">(</span><span class="n">GetTransientPackage</span><span class="p">(),</span><span class="w"> </span><span class="p">{});</span><span class="w">  </span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="c1">// Create the handler for the request capturing the &quot;Op&quot; its a part of.</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">MyMsHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FOnMyMsFullResponse</span><span class="o">::</span><span class="n">CreateLambda</span><span class="p">([</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="p">](</span><span class="n">FMyMsFullResponse</span><span class="w"> </span><span class="n">Resp</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">    </span><span class="p">{</span><span class="w">       </span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">        </span><span class="c1">// If we timedout and are retrying the request, do nothing.</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">Resp</span><span class="p">.</span><span class="n">State</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RS_Retrying</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w">         </span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="w">        </span><span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span><span class="w"> </span><span class="n">Display</span><span class="p">,</span><span class="w"> </span><span class="n">TEXT</span><span class="p">(</span><span class="s">&quot;Talked to a Microservice from a Hook!!!! Look at that, huh?&quot;</span><span class="p">));</span><span class="w">  </span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="w">        </span><span class="c1">// If the response from the Microservice was not a success, fail the operation.</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">Resp</span><span class="p">.</span><span class="n">State</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">RS_Success</span><span class="p">)</span><span class="w">  </span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="w">        </span><span class="p">{</span><span class="w">   </span>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="w">            </span><span class="c1">// Trigger the operation as a success</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="w">            </span><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">GetEngineSubsystem</span><span class="o">&lt;</span><span class="n">UBeamRequestTracker</span><span class="o">&gt;</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">TriggerOperationError</span><span class="p">(</span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">Resp</span><span class="p">.</span><span class="n">ErrorData</span><span class="p">.</span><span class="n">message</span><span class="p">);</span><span class="w">  </span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w">  </span>
<a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a><span class="w">        </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a>
<a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a><span class="w">        </span><span class="c1">// (...) Do stuff with the Microservice&#39;s response</span>
<a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a>
<a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a><span class="w">        </span><span class="c1">// Trigger the operation as a success</span>
<a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a><span class="w">       </span><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">GetEngineSubsystem</span><span class="o">&lt;</span><span class="n">UBeamRequestTracker</span><span class="o">&gt;</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">TriggerOperationSuccess</span><span class="p">(</span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">FString</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">));</span><span class="w">  </span>
<a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a><span class="w">    </span><span class="p">});</span><span class="w">   </span>
<a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a>
<a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a><span class="w">    </span><span class="c1">// Make the request</span>
<a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a><span class="w">    </span><span class="n">FBeamRequestContext</span><span class="w"> </span><span class="n">Ctx</span><span class="p">;</span><span class="w">  </span>
<a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a><span class="w">    </span><span class="n">MyMsApi</span><span class="o">-&gt;</span><span class="n">CPP_MyMs</span><span class="p">(</span><span class="n">UserSlot</span><span class="p">,</span><span class="w"> </span><span class="n">MyMsReq</span><span class="p">,</span><span class="w"> </span><span class="n">MyMsHandler</span><span class="p">,</span><span class="w"> </span><span class="n">Ctx</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">GetGameInstance</span><span class="p">());</span><span class="w">  </span>
<a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a>
<a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a><span class="w">    </span><span class="c1">// Return the create Operation</span>
<a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Op</span><span class="p">;</span><span class="w">  </span>
<a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a><span class="p">}));</span>
</code></pre></div>
<h2 id="why-not-template-based-promises">Why not Template-based Promises?<a class="headerlink" href="#why-not-template-based-promises" title="Permanent link">¶</a></h2>
<p>The biggest reason not to do that is Blueprint Compatibility. The most recognizable template-based Promise-style API just won't work with BPs.
As such, we wanted to create an underlying system that provided the same functionality but that retained BP compatibility even if it lost the template-based interface.
The result was this Operation system.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In using it inside our own SDK to develop our Stateful <code>UBeamRuntimeSubsystems</code>, we found that we didn't miss the template aspect or its chaining aspect of <code>Do().Then()</code>.
However, the chaining might be something we eventually look into. Perhaps adding the ability to chain requests like these as "syntactic sugar"; but its highly unlikely we'll do anything with templates at the Operation-layer as we do not want to lose the BP-Compatibility.</p>
</div>
<h2 id="waits">Waits<a class="headerlink" href="#waits" title="Permanent link">¶</a></h2>
<p>This is equivalent to <code>Promise.All</code> or <code>Task.WhenAll</code> keeping with our promise analogy. It can be used to wait on a set of operations and/or requests executed concurrently whose errors and successes are handled all at once. 
To use this, call <code>UBeamRequestTracker::[CPP_]WaitAll</code>.</p>
<p>This function takes arrays of <code>FBeamRequestContext</code>, <code>FBeamOperationHandle</code> and/or <code>FBeamWaitHandle</code> and a handler function.
It'll wait until all the provided handles are completed and then gather all emitted events and request responses and invoke your handle function passing in a helper struct to identify successes/failures.</p>
<p>You can find examples of these in our SDKs so you can learn how to use this yourself. The most common examples are:</p>
<ul>
<li><code>UBeamRuntime</code>'s Initialization and Login's Lifecycle is defined as a multi-step operation with several wait points.</li>
<li><code>UBeamContentSubsystem</code> also has an example around how we fetch content updates.</li>
</ul>
<hr />
<p>Understanding these concepts and how to leverage them can unlock the maximum potential uses and customizability of the SDK; but superficial knowledge is sufficient for the most basic use-cases. 
Take your time and refer back to this page as you need!</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/Beamable"  target="_blank" rel="noopener">Beamable</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../assets/javascripts/extra.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>